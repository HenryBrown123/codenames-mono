<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Codenames - Operation Active</title>
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        /* Core Colors - Top Secret */
        --color-background: #0a0a0f;
        --color-surface-1: rgba(255, 255, 255, 0.02);
        --color-surface-2: rgba(255, 255, 255, 0.05);
        --color-surface-3: rgba(255, 255, 255, 0.08);
        --color-surface-4: rgba(255, 255, 255, 0.12);

        /* Mission Critical Colors */
        --color-team-red: #ff0040;
        --color-team-blue: #00d4ff;
        --color-neutral: #888888;
        --color-assassin: #000000;

        /* UI Colors */
        --color-primary: #00ff88;
        --color-primary-hover: #00cc6a;
        --color-text: rgba(255, 255, 255, 0.95);
        --color-text-muted: rgba(255, 255, 255, 0.6);
        --color-border: rgba(255, 255, 255, 0.1);

        /* Typography */
        --font-family: "JetBrains Mono", "Courier New", monospace;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: var(--font-family);
        background:
          radial-gradient(circle at 20% 50%, rgba(0, 255, 136, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(255, 0, 128, 0.1) 0%, transparent 50%),
          var(--color-background);
        color: var(--color-text);
        overflow: hidden;
        height: 100vh;
        position: relative;
      }

      /* Scanlines effect */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(255, 255, 255, 0.01) 2px,
          rgba(255, 255, 255, 0.01) 4px
        );
        pointer-events: none;
        z-index: 999;
      }

      .game-container {
        height: 100vh;
        display: grid;
        padding: 1rem;
        gap: 1rem;
        transition: all 0.3s ease;
      }

      /* Desktop Layout */
      @media (min-width: 1200px) {
        .game-container {
          grid-template-columns: 300px 1fr;
          grid-template-rows: 1fr;
        }

        .mobile-only {
          display: none !important;
        }
      }

      /* Tablet and Mobile */
      @media (max-width: 1199px) {
        .game-container {
          grid-template-rows: auto minmax(0, 1fr) auto;
          grid-template-columns: 1fr;
          gap: 0.5rem;
          padding: 0.5rem;
        }

        .game-container.instructions-hidden {
          grid-template-rows: 0fr minmax(0, 1fr) auto;
        }

        .desktop-only {
          display: none !important;
        }
      }

      /* Sidebar - High Tech Panel */
      .sidebar {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        background: var(--color-surface-2);
        padding: 1.5rem;
        border-radius: 12px;
        border: 1px solid var(--color-border);
        backdrop-filter: blur(10px);
        position: relative;
        overflow: hidden;
      }

      .sidebar::before {
        content: "INTEL";
        position: absolute;
        top: 0.5rem;
        right: 1rem;
        font-size: 0.7rem;
        color: var(--color-primary);
        opacity: 0.3;
        letter-spacing: 0.2em;
      }

      /* Board Area - Simple and Clean */
      .board-area {
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        border-radius: 12px;
        padding: 2rem;
        min-height: 0;
        background: 
          /* Wood grain pattern */ linear-gradient(
          90deg,
          #8b6939 0%,
          #a0743f 20%,
          #7d5d33 40%,
          #946b3a 60%,
          #8b6939 80%,
          #a0743f 100%
        );
        border: 1px solid var(--color-border);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
      }

      /* Reduce padding on mobile */
      @media (max-width: 768px) {
        .board-area {
          padding: 1rem;
          border-radius: 8px;
        }
      }

      @media (max-width: 480px) {
        .board-area {
          padding: 0.5rem;
        }
      }

      /* Board wrapper - Simple container */
      .board-wrapper {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      @media (max-width: 768px) {
        .board-wrapper {
          padding: 0.5rem;
        }
      }

      @media (max-width: 480px) {
        .board-wrapper {
          padding: 0.25rem;
        }
      }

      .game-board {
        width: 100%;
        max-width: 900px;
        max-height: 90%;
        aspect-ratio: 5/4;
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        grid-template-rows: repeat(5, 1fr);
        gap: 2rem;
        perspective: 1000px;
        margin: auto;
      }

      /* Large desktop - don't fill all space, maintain reasonable size */
      @media (min-width: 1600px) {
        .game-board {
          max-width: 1000px;
          gap: 2.5rem;
        }
      }

      /* Standard desktop */
      @media (min-width: 1200px) and (max-width: 1599px) {
        .game-board {
          gap: 2rem;
          max-width: 900px;
        }
      }

      /* Small desktop / large tablet - THIS IS THE KEY RANGE */
      @media (min-width: 900px) and (max-width: 1199px) {
        .game-board {
          gap: 1.2rem;
          max-width: 800px;
          aspect-ratio: 5/4.5;
        }
      }

      /* Tablet - good spacing */
      @media (max-width: 899px) and (min-width: 769px) {
        .game-board {
          aspect-ratio: 5/4.5;
          gap: 1rem;
          max-width: 700px;
          max-height: 85%;
        }
      }

      /* Mobile - back to square 5x5 that worked well */
      @media (max-width: 768px) {
        .game-board {
          aspect-ratio: 1/1;
          width: 100%;
          height: auto;
          max-width: none;
          max-height: 80%;
          gap: 1rem;
          grid-template-columns: repeat(5, 1fr);
          grid-template-rows: repeat(5, 1fr);
        }
      }

      /* Small mobile - maintain square but adjust gap */
      @media (max-width: 480px) {
        .game-board {
          aspect-ratio: 1/1;
          gap: 0.6rem;
          max-height: 75%;
        }
      }

      /* Very small mobile */
      @media (max-width: 360px) {
        .game-board {
          gap: 0.4rem;
        }
      }

      /* Card Container with 3D Effects */
      .card-container {
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.3s ease;
      }

      /* Add hover effect to lift cards */
      .card-container:hover {
        transform: translateZ(10px) translateY(-2px);
      }

      /* Base card styling */
      .base-card {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #f4f1e8;
        border: 1px solid #d4d1c8;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0.5rem;
        font-weight: 700;
        color: #2a2a3e;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        font-size: clamp(0.6rem, 2vw, 1.2rem);
        z-index: 1;
        transform-style: preserve-3d;
        cursor: pointer;
        transition: all 0.2s ease;
        /* Card thickness effect */
        box-shadow:
          0 1px 0 rgba(0, 0, 0, 0.2),
          0 2px 0 rgba(0, 0, 0, 0.2),
          0 3px 0 rgba(0, 0, 0, 0.2),
          0 4px 0 rgba(0, 0, 0, 0.2),
          0 5px 0 rgba(0, 0, 0, 0.2),
          0 6px 0 rgba(0, 0, 0, 0.2),
          0 7px 0 rgba(0, 0, 0, 0.2),
          0 8px 0 rgba(0, 0, 0, 0.2),
          0 9px 0 rgba(0, 0, 0, 0.2),
          0 10px 0 rgba(0, 0, 0, 0.2),
          0 12px 20px rgba(0, 0, 0, 0.3);
      }

      /* Responsive thickness for tablets */
      @media (max-width: 1024px) {
        .base-card {
          padding: 0.8rem 0.4rem;
          box-shadow:
            0 1px 0 rgba(0, 0, 0, 0.2),
            0 2px 0 rgba(0, 0, 0, 0.2),
            0 3px 0 rgba(0, 0, 0, 0.2),
            0 4px 0 rgba(0, 0, 0, 0.2),
            0 5px 0 rgba(0, 0, 0, 0.2),
            0 6px 0 rgba(0, 0, 0, 0.2),
            0 8px 15px rgba(0, 0, 0, 0.3);
        }
      }

      /* Responsive thickness for mobile */
      @media (max-width: 768px) {
        .base-card {
          border-radius: 6px;
          font-size: clamp(0.5rem, 3vw, 0.9rem);
          padding: 0.6rem 0.3rem;
          box-shadow:
            0 1px 0 rgba(0, 0, 0, 0.15),
            0 2px 0 rgba(0, 0, 0, 0.15),
            0 3px 5px rgba(0, 0, 0, 0.2);
        }
      }

      @media (max-width: 480px) {
        .base-card {
          padding: 0.5rem 0.2rem;
          box-shadow:
            0 1px 0 rgba(0, 0, 0, 0.1),
            0 2px 3px rgba(0, 0, 0, 0.2);
        }
      }

      .base-card:hover {
        transform: translateY(-4px) scale(1.02);
        box-shadow:
          0 2px 0 rgba(0, 0, 0, 0.2),
          0 4px 0 rgba(0, 0, 0, 0.2),
          0 6px 0 rgba(0, 0, 0, 0.2),
          0 8px 0 rgba(0, 0, 0, 0.2),
          0 10px 0 rgba(0, 0, 0, 0.2),
          0 12px 0 rgba(0, 0, 0, 0.2),
          0 14px 0 rgba(0, 0, 0, 0.2),
          0 16px 0 rgba(0, 0, 0, 0.2),
          0 18px 0 rgba(0, 0, 0, 0.2),
          0 20px 0 rgba(0, 0, 0, 0.2),
          0 22px 30px rgba(0, 0, 0, 0.4);
      }

      /* Deal animation for base cards */
      @keyframes dealCard {
        0% {
          transform: translateX(-100vw) translateY(-100vh) rotate(-6deg);
          opacity: 0;
        }
        60% {
          transform: translateX(0) translateY(0) rotate(2deg);
          opacity: 1;
        }
        100% {
          transform: translateX(0) translateY(0);
          opacity: 1;
        }
      }

      .base-card.dealing {
        animation: dealCard 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        animation-delay: calc(var(--card-index) * 50ms);
        opacity: 0;
      }

      /* Paper texture */
      .paper-texture {
        position: absolute;
        inset: 0;
        background:
          url('data:image/svg+xml,%3Csvg width="100" height="100" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noise"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="1.2" numOctaves="6" /%3E%3CfeColorMatrix values="0 0 0 0 0.9 0 0 0 0 0.9 0 0 0 0 0.85 0 0 0 0.15 0"/%3E%3C/filter%3E%3Crect width="100" height="100" filter="url(%23noise)"/%3E%3C/svg%3E'),
          repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            rgba(0, 0, 0, 0.04) 2px,
            rgba(0, 0, 0, 0.04) 3px
          ),
          radial-gradient(ellipse at 20% 30%, rgba(139, 119, 101, 0.1) 0%, transparent 50%),
          radial-gradient(ellipse at 80% 70%, rgba(139, 119, 101, 0.08) 0%, transparent 40%);
        background-size:
          150px 150px,
          4px 4px,
          200px 200px,
          180px 180px;
        opacity: 0.6;
        border-radius: 8px;
        pointer-events: none;
      }

      /* Word text styling - make it pop on colored backgrounds */
      .word-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90%;
        text-align: center;
        font-size: clamp(0.7rem, 1.8vw, 1.1rem);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        z-index: 3; /* Above the watermark */
        line-height: 1.2;
        color: #2a2a3e;
        text-shadow:
          1px 1px 0px rgba(255, 255, 255, 0.8),
          -1px -1px 2px rgba(0, 0, 0, 0.4),
          0 0 10px rgba(255, 255, 255, 0.3);
      }

      /* Make text white on colored backgrounds */
      .spymaster-red .word-text,
      .spymaster-blue .word-text,
      .spymaster-neutral .word-text {
        color: #ffffff;
        font-weight: 700;
        text-shadow:
          2px 2px 4px rgba(0, 0, 0, 0.6),
          -1px -1px 2px rgba(0, 0, 0, 0.4),
          0 0 20px rgba(0, 0, 0, 0.5);
      }

      .spymaster-assassin .word-text {
        color: #ffff00;
        font-weight: 900;
        text-shadow:
          2px 2px 4px rgba(0, 0, 0, 0.9),
          -1px -1px 2px rgba(0, 0, 0, 0.6),
          0 0 15px rgba(255, 255, 0, 0.4);
      }

      /* Around 1000px - special handling */
      @media (min-width: 900px) and (max-width: 1199px) {
        .word-text {
          font-size: clamp(0.65rem, 1.6vw, 0.95rem);
          letter-spacing: 0.03em;
        }
      }

      @media (max-width: 768px) {
        .word-text {
          font-size: clamp(0.7rem, 2.8vw, 0.9rem);
          font-weight: 800;
          letter-spacing: 0.02em;
        }
      }

      @media (max-width: 480px) {
        .word-text {
          font-size: clamp(0.65rem, 3.2vw, 0.85rem);
          font-weight: 900;
          letter-spacing: 0;
        }
      }

      /* Cover card for revealed state */
      .cover-card {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        transform-style: preserve-3d;
        transform: translateZ(10px);
        /* Thick card shadow */
        box-shadow:
          0 1px 0 rgba(0, 0, 0, 0.25),
          0 2px 0 rgba(0, 0, 0, 0.25),
          0 3px 0 rgba(0, 0, 0, 0.25),
          0 4px 0 rgba(0, 0, 0, 0.25),
          0 5px 0 rgba(0, 0, 0, 0.25),
          0 6px 0 rgba(0, 0, 0, 0.25),
          0 7px 0 rgba(0, 0, 0, 0.25),
          0 8px 0 rgba(0, 0, 0, 0.25),
          0 10px 20px rgba(0, 0, 0, 0.4);
        z-index: 2;
        opacity: 0;
        pointer-events: none;
        visibility: hidden;
        transition: none;
      }

      /* Responsive thickness for cover cards */
      @media (max-width: 1024px) {
        .cover-card {
          box-shadow:
            0 1px 0 rgba(0, 0, 0, 0.25),
            0 2px 0 rgba(0, 0, 0, 0.25),
            0 3px 0 rgba(0, 0, 0, 0.25),
            0 4px 0 rgba(0, 0, 0, 0.25),
            0 5px 0 rgba(0, 0, 0, 0.25),
            0 6px 15px rgba(0, 0, 0, 0.4);
        }
      }

      @media (max-width: 768px) {
        .cover-card {
          border-radius: 6px;
          border-width: 1px;
          box-shadow:
            0 1px 0 rgba(0, 0, 0, 0.2),
            0 2px 0 rgba(0, 0, 0, 0.2),
            0 3px 5px rgba(0, 0, 0, 0.3);
          transform: translateZ(5px);
        }
      }

      @media (max-width: 480px) {
        .cover-card {
          box-shadow:
            0 1px 0 rgba(0, 0, 0, 0.15),
            0 2px 3px rgba(0, 0, 0, 0.3);
        }
      }

      /* Cover dealing animation */
      @keyframes dealCover {
        0% {
          transform: translateX(-100vw) translateY(-100vh) rotate(-6deg) translateZ(10px);
          opacity: 0;
          visibility: visible;
        }
        1% {
          visibility: visible;
        }
        60% {
          transform: translateX(0) translateY(0) rotate(2deg) translateZ(10px);
          opacity: 1;
        }
        100% {
          transform: translateZ(10px);
          opacity: 1;
          visibility: visible;
        }
      }

      .cover-card.visible {
        opacity: 1;
        pointer-events: auto;
        visibility: visible;
      }

      .cover-card.dealing {
        animation: dealCover 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        animation-delay: calc(var(--card-index) * 50ms);
        opacity: 0;
      }

      .cover-card.red {
        background: #b85555;
        border: 2px solid #660000;
      }

      .cover-card.blue {
        background: #5588b8;
        border: 2px solid #002244;
      }

      .cover-card.neutral {
        background: #999088;
        border: 2px solid #333333;
      }

      .cover-card.assassin {
        background: #0a0a0a;
        border: 2px solid #ffff00;
      }

      /* Cover symbol - massive size with embossed look */
      .cover-symbol {
        font-size: clamp(4rem, 15vw, 8rem);
        font-weight: 900;
        color: rgba(0, 0, 0, 0.4);
        text-shadow:
          1px 1px 0px rgba(255, 255, 255, 0.2),
          -1px -1px 1px rgba(0, 0, 0, 0.6);
        filter: drop-shadow(1px 1px 1px rgba(255, 255, 255, 0.1))
          drop-shadow(-1px -1px 1px rgba(0, 0, 0, 0.4));
        line-height: 1;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Font Awesome icon sizing and adjustments */
      .cover-symbol i {
        display: block;
      }

      /* Specific icon adjustments */
      .cover-symbol .fa-caret-down {
        font-size: 1.2em; /* Make triangle bigger */
        transform: scaleX(1.3); /* Widen the triangle */
      }

      .cover-symbol .fa-moon {
        font-size: 0.8em; /* Make moon smaller */
      }

      .cover-symbol .fa-minus {
        font-size: 0.9em; /* Slightly smaller line */
        transform: scaleX(1.5); /* Make line longer */
      }

      @media (min-width: 900px) and (max-width: 1199px) {
        .cover-symbol {
          font-size: clamp(3.5rem, 12vw, 6rem);
        }
      }

      @media (max-width: 768px) {
        .cover-symbol {
          font-size: clamp(3rem, 18vw, 5rem);
        }
      }

      @media (max-width: 480px) {
        .cover-symbol {
          font-size: clamp(2.5rem, 20vw, 4rem);
        }
      }

      .cover-symbol.assassin {
        color: #ffff00;
        text-shadow:
          0 0 20px rgba(255, 255, 0, 0.8),
          0 0 40px rgba(0, 255, 255, 0.6);
        animation: electric-flicker 2s ease-in-out infinite;
      }

      @keyframes electric-flicker {
        0%,
        100% {
          opacity: 0.6;
          filter: brightness(0.8);
        }
        10% {
          opacity: 1;
          filter: brightness(1.5);
        }
        20% {
          opacity: 0.7;
          filter: brightness(0.9);
        }
        30% {
          opacity: 1;
          filter: brightness(1.3);
        }
        50% {
          opacity: 1;
          filter: brightness(1.2);
        }
        70% {
          opacity: 0.8;
          filter: brightness(1);
        }
        90% {
          opacity: 1;
          filter: brightness(1.4);
        }
      }

      /* Spymaster view styles */
      .base-card.spymaster-red {
        background: #b85555 !important;
        border: 2px solid #660000 !important;
      }

      .base-card.spymaster-blue {
        background: #5588b8 !important;
        border: 2px solid #002244 !important;
      }

      .base-card.spymaster-neutral {
        background: #999088 !important;
        border: 2px solid #333333 !important;
      }

      .base-card.spymaster-assassin {
        background: #0a0a0a !important;
        border: 2px solid #ffff00 !important;
        color: #ffffff !important;
      }

      /* Spymaster symbol - MASSIVE watermark that fills the card */
      .spymaster-symbol {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0) rotate(-180deg);
        font-size: clamp(4rem, 15vw, 8rem);
        font-weight: 900;
        opacity: 0;
        z-index: 1; /* Behind the text */
        color: rgba(0, 0, 0, 0.2);
        text-shadow: none;
        filter: none;
        line-height: 1;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Font Awesome icon sizing for spymaster */
      .spymaster-symbol i {
        display: block;
      }

      /* Same adjustments for spymaster view */
      .spymaster-symbol .fa-caret-down {
        font-size: 1.2em;
        transform: scaleX(1.3);
      }

      .spymaster-symbol .fa-moon {
        font-size: 0.8em;
      }

      .spymaster-symbol .fa-minus {
        font-size: 0.9em;
        transform: scaleX(1.5);
      }

      /* Special watermark colors for different teams */
      .spymaster-red .spymaster-symbol {
        color: rgba(0, 0, 0, 0.25);
      }

      .spymaster-blue .spymaster-symbol {
        color: rgba(0, 0, 0, 0.25);
      }

      .spymaster-neutral .spymaster-symbol {
        color: rgba(0, 0, 0, 0.2);
      }

      /* Around 1000px - special handling */
      @media (min-width: 900px) and (max-width: 1199px) {
        .spymaster-symbol {
          font-size: clamp(3.5rem, 12vw, 6rem);
        }
      }

      @media (max-width: 768px) {
        .spymaster-symbol {
          font-size: clamp(3rem, 18vw, 5rem);
        }
      }

      @media (max-width: 480px) {
        .spymaster-symbol {
          font-size: clamp(2.5rem, 20vw, 4rem);
        }
      }

      .spymaster-symbol.danger {
        color: rgba(255, 255, 0, 0.25);
        text-shadow: none;
        animation: danger-pulse 2s ease-in-out infinite;
      }

      @keyframes danger-pulse {
        0%,
        100% {
          opacity: 0;
          transform: translate(-50%, -50%) scale(1) rotate(0deg);
        }
        50% {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1.1) rotate(0deg);
        }
      }

      @keyframes stampReveal {
        0% {
          opacity: 0;
          transform: translate(-50%, -50%) scale(0) rotate(-180deg);
        }
        50% {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1.3) rotate(20deg);
        }
        75% {
          transform: translate(-50%, -50%) scale(0.9) rotate(-5deg);
        }
        100% {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1) rotate(0deg);
        }
      }

      .spymaster-symbol.visible {
        animation: stampReveal 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
      }

      /* Instructions Panel */
      .instructions {
        padding: 1rem;
        background: var(--color-surface-3);
        border-radius: 8px;
        border: 1px solid var(--color-border);
        position: relative;
      }

      @media (max-width: 768px) {
        .instructions {
          padding: 0.75rem;
        }
      }

      @media (max-width: 480px) {
        .instructions {
          padding: 0.5rem;
        }
      }

      .instructions h3 {
        margin-bottom: 0.5rem;
        font-size: 1.1rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--color-primary);
      }

      .instructions p {
        opacity: 0.8;
        line-height: 1.5;
        font-size: 0.9rem;
      }

      /* Mobile Header */
      .mobile-header {
        background: var(--color-surface-2);
        border-radius: 12px;
        border: 1px solid var(--color-border);
        overflow: hidden;
        transition: all 0.3s ease;
        position: relative;
        backdrop-filter: blur(10px);
      }

      .instructions-hidden .mobile-header {
        opacity: 0;
        transform: translateY(-20px);
        pointer-events: none;
        height: 0;
        min-height: 0;
        padding: 0;
        margin: 0;
      }

      /* Clue Display */
      .clue-display {
        padding: 1.5rem;
        background: linear-gradient(135deg, var(--color-surface-3) 0%, var(--color-surface-2) 100%);
        border-radius: 8px;
        text-align: center;
        border: 1px solid var(--color-border);
        position: relative;
        overflow: hidden;
      }

      @media (max-width: 768px) {
        .clue-display {
          padding: 1rem;
        }
      }

      @media (max-width: 480px) {
        .clue-display {
          padding: 0.75rem;
        }
      }

      .clue-display::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(0, 255, 136, 0.1), transparent);
        animation: sweep 3s infinite;
      }

      @keyframes sweep {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      .clue-display h4 {
        opacity: 0.6;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
      }

      .clue-display .clue-text {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--color-primary);
        text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.8;
        }
      }

      /* Animation Controls */
      .animation-controls {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .animation-controls h4 {
        color: var(--color-primary);
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 0.5rem;
      }

      /* Action Button */
      .action-button {
        padding: 0.75rem 1.5rem;
        background: transparent;
        border: 1px solid var(--color-primary);
        border-radius: 8px;
        color: var(--color-primary);
        font-size: 0.9rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.2s ease;
        width: 100%;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        position: relative;
        overflow: hidden;
        margin-bottom: 0.5rem;
      }

      .action-button::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transition: left 0.5s;
      }

      .action-button:hover {
        background: var(--color-primary);
        color: #000000;
        transform: translateY(-2px);
        box-shadow:
          0 5px 15px rgba(0, 255, 136, 0.4),
          inset 0 0 20px rgba(0, 255, 136, 0.2);
      }

      .action-button:hover::before {
        left: 100%;
      }

      /* Help Button */
      .help-button {
        position: fixed;
        top: 1rem;
        right: 1rem;
        background: rgba(0, 0, 0, 0.6);
        border: 1px solid var(--color-border);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--color-primary);
        cursor: pointer;
        font-size: 1.2rem;
        transition: all 0.2s ease;
        z-index: 100;
        backdrop-filter: blur(10px);
      }

      .help-button:hover {
        background: rgba(0, 0, 0, 0.8);
        transform: scale(1.1);
        box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
      }

      .help-button.active {
        background: var(--color-primary);
        color: #000000;
        transform: rotate(180deg);
      }

      /* Mobile Dashboard */
      .mobile-dashboard {
        background: var(--color-surface-2);
        border-radius: 12px;
        border: 1px solid var(--color-border);
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        backdrop-filter: blur(10px);
      }

      @media (max-width: 768px) {
        .mobile-dashboard {
          padding: 0.75rem;
          gap: 0.75rem;
          border-radius: 8px;
        }
      }

      @media (max-width: 480px) {
        .mobile-dashboard {
          padding: 0.5rem;
          gap: 0.5rem;
        }
      }

      /* Tablet - Side by side layout */
      @media (min-width: 600px) and (max-width: 1199px) {
        .mobile-dashboard {
          flex-direction: row;
          align-items: center;
          padding: 1.25rem;
          gap: 1.5rem;
        }

        .mobile-dashboard .clue-display {
          flex: 1;
          padding: 1rem 1.5rem;
        }

        .mobile-dashboard .action-button {
          width: auto;
          padding: 1rem 2.5rem;
          flex-shrink: 0;
        }
      }

      /* Glitch text effect */
      @keyframes glitch {
        0%,
        100% {
          text-shadow:
            0 0 2px #00ff88,
            0 0 4px #00ff88;
        }
        25% {
          text-shadow:
            -2px 0 #ff0040,
            2px 0 #00d4ff;
        }
        50% {
          text-shadow:
            2px 0 #ff0080,
            -2px 0 #00ff88;
        }
        75% {
          text-shadow:
            0 0 2px #00d4ff,
            0 0 4px #00d4ff;
        }
      }

      h1,
      h2,
      h3 {
        animation: glitch 4s infinite;
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .clue-display .clue-text {
          font-size: 1.3rem;
        }
      }

      @media (max-width: 480px) {
        .clue-display .clue-text {
          font-size: 1.1rem;
        }

        .instructions h3 {
          font-size: 1rem;
        }

        .instructions p {
          font-size: 0.8rem;
        }
      }
    </style>
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
  </head>
  <body>
    <div class="game-container" id="gameContainer">
      <!-- Desktop Sidebar -->
      <aside class="sidebar desktop-only">
        <div class="instructions">
          <h3>Mission Briefing</h3>
          <p>Decode your agents. Avoid enemy operatives and the assassin.</p>
        </div>

        <div class="clue-display">
          <h4>Current Intel</h4>
          <div class="clue-text">OCEAN 3</div>
        </div>

        <div class="animation-controls">
          <h4>Card States</h4>
          <button class="action-button" onclick="showUnclassified()">Reset Cards</button>
          <button class="action-button" onclick="showClassified()">Reveal Teams</button>
          <button class="action-button" onclick="showSpymaster()">Spymaster View</button>
        </div>
      </aside>

      <!-- Mobile Header -->
      <header class="mobile-header mobile-only">
        <div class="instructions">
          <h3>Mission Briefing</h3>
          <p>Decode your agents. Avoid enemy operatives and the assassin.</p>
        </div>
      </header>

      <!-- Board Area -->
      <main class="board-area">
        <div class="board-wrapper">
          <div class="game-board" id="gameBoard">
            <!-- Cards will be generated by JavaScript -->
          </div>
        </div>
      </main>

      <!-- Mobile Dashboard -->
      <div class="mobile-dashboard mobile-only">
        <div class="clue-display">
          <h4>Current Intel</h4>
          <div class="clue-text">OCEAN 3</div>
        </div>

        <button class="action-button" onclick="cycleCardState()">Cycle View</button>
      </div>
    </div>

    <!-- Help Button -->
    <button class="help-button mobile-only" id="helpButton">?</button>

    <script>
      // Game words and their team assignments
      const gameWords = [
        "WAVE",
        "SAND",
        "FISH",
        "BOAT",
        "STAR",
        "MOON",
        "TREE",
        "ROCK",
        "BIRD",
        "CLOUD",
        "RAIN",
        "SNOW",
        "FIRE",
        "WATER",
        "EARTH",
        "WIND",
        "GOLD",
        "SILVER",
        "IRON",
        "WOOD",
        "GLASS",
        "PAPER",
        "STONE",
        "METAL",
        "LIGHT",
      ];

      // Team assignments (red=0-8, blue=9-16, neutral=17-23, assassin=24)
      const cardTeams = [
        "red",
        "red",
        "neutral",
        "red",
        "red",
        "blue",
        "blue",
        "neutral",
        "blue",
        "red",
        "red",
        "assassin",
        "red",
        "red",
        "red",
        "blue",
        "blue",
        "blue",
        "neutral",
        "neutral",
        "blue",
        "blue",
        "neutral",
        "neutral",
        "neutral",
      ];

      // Updated symbols - using Font Awesome icons!
      const teamSymbols = {
        red: '<i class="fa-solid fa-caret-down"></i>', // Downward triangle
        blue: '<i class="fa-solid fa-moon"></i>', // Crescent moon
        neutral: '<i class="fa-solid fa-minus"></i>', // Horizontal line
        assassin: "â˜ ", // Keep unicode skull
      };

      let currentState = "unclassified"; // unclassified, classified, spymaster
      let mobileStateIndex = 0;

      function createCard(word, index) {
        const team = cardTeams[index];
        const symbol = teamSymbols[team];

        return `
          <div class="card-container" data-team="${team}" style="--card-index: ${index};">
            <div class="base-card">
              <div class="paper-texture"></div>
              <span class="word-text">${word}</span>
              <div class="spymaster-symbol ${team === "assassin" ? "danger" : ""}">${symbol}</div>
            </div>
            <div class="cover-card ${team}">
              <div class="paper-texture"></div>
              <div class="cover-symbol ${team === "assassin" ? "assassin" : ""}">${symbol}</div>
            </div>
          </div>
        `;
      }

      function initializeBoard() {
        const gameBoard = document.getElementById("gameBoard");
        gameBoard.innerHTML = gameWords.map((word, index) => createCard(word, index)).join("");

        // Trigger initial deal animation
        setTimeout(() => {
          const baseCards = document.querySelectorAll(".base-card");
          baseCards.forEach((card) => {
            card.classList.add("dealing");
          });
        }, 100);
      }

      function showUnclassified() {
        currentState = "unclassified";

        // Reset base cards
        const baseCards = document.querySelectorAll(".base-card");
        baseCards.forEach((card) => {
          card.classList.remove(
            "spymaster-red",
            "spymaster-blue",
            "spymaster-neutral",
            "spymaster-assassin",
          );
          card.style.color = "#2a2a3e";
        });

        // Hide symbols
        const symbols = document.querySelectorAll(".spymaster-symbol");
        symbols.forEach((symbol) => {
          symbol.classList.remove("visible");
        });

        // Hide cover cards
        const coverCards = document.querySelectorAll(".cover-card");
        coverCards.forEach((card) => {
          card.classList.remove("visible", "dealing");
        });
      }

      function showClassified() {
        currentState = "classified";

        // Reset spymaster state first
        const baseCards = document.querySelectorAll(".base-card");
        baseCards.forEach((card) => {
          card.classList.remove(
            "spymaster-red",
            "spymaster-blue",
            "spymaster-neutral",
            "spymaster-assassin",
          );
          card.style.color = "#2a2a3e";
        });

        // Hide symbols
        const symbols = document.querySelectorAll(".spymaster-symbol");
        symbols.forEach((symbol) => {
          symbol.classList.remove("visible");
        });

        // Show cover cards with animation
        const coverCards = document.querySelectorAll(".cover-card");
        coverCards.forEach((card, index) => {
          // Remove any existing classes to ensure clean state
          card.classList.remove("dealing", "visible");
          // Force a reflow to ensure the animation plays
          void card.offsetWidth;
          // Add both classes together
          setTimeout(() => {
            card.classList.add("dealing", "visible");
          }, index * 50);
        });
      }

      function showSpymaster() {
        currentState = "spymaster";

        // Hide cover cards first
        const coverCards = document.querySelectorAll(".cover-card");
        coverCards.forEach((card) => {
          card.classList.remove("visible", "dealing");
        });

        // Color base cards and show symbols
        const containers = document.querySelectorAll(".card-container");
        containers.forEach((container, index) => {
          const team = container.dataset.team;
          const baseCard = container.querySelector(".base-card");
          const symbol = container.querySelector(".spymaster-symbol");

          setTimeout(() => {
            baseCard.classList.add(`spymaster-${team}`);
            if (team === "assassin") {
              baseCard.style.color = "#ffffff";
            }
            symbol.classList.add("visible");
          }, index * 30);
        });
      }

      function cycleCardState() {
        const states = ["unclassified", "classified", "spymaster"];
        mobileStateIndex = (mobileStateIndex + 1) % states.length;

        if (mobileStateIndex === 0) {
          showUnclassified();
        } else if (mobileStateIndex === 1) {
          showClassified();
        } else {
          showSpymaster();
        }
      }

      // Card click functionality
      function handleCardClick(event) {
        const container = event.currentTarget;
        const coverCard = container.querySelector(".cover-card");

        if (currentState === "unclassified") {
          // Toggle visibility
          if (coverCard.classList.contains("visible")) {
            // Hide the card
            coverCard.classList.remove("visible", "dealing");
          } else {
            // Show the card with animation
            coverCard.classList.remove("dealing");
            // Force a reflow
            void coverCard.offsetWidth;
            // Add both classes
            coverCard.classList.add("dealing", "visible");
          }
        }
      }

      // Help button functionality
      const helpButton = document.getElementById("helpButton");
      const gameContainer = document.getElementById("gameContainer");
      let instructionsHidden = false;

      helpButton.addEventListener("click", () => {
        instructionsHidden = !instructionsHidden;

        if (instructionsHidden) {
          gameContainer.classList.add("instructions-hidden");
          helpButton.classList.add("active");
          helpButton.textContent = "!";
        } else {
          gameContainer.classList.remove("instructions-hidden");
          helpButton.classList.remove("active");
          helpButton.textContent = "?";
        }
      });

      // Initialize the game
      document.addEventListener("DOMContentLoaded", () => {
        initializeBoard();

        // Add click handlers to cards
        document.addEventListener("click", (e) => {
          const cardContainer = e.target.closest(".card-container");
          if (cardContainer) {
            handleCardClick({ currentTarget: cardContainer });
          }
        });
      });
    </script>
  </body>
</html>
